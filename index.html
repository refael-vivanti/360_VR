<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>WebXR YouTube Video Player</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
        #enter-vr { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <button id="enter-vr">Enter VR</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, video, videoTexture, videoMaterial, videoScreen;
        let button1, button2;
        let controller1, controller2;

        init();

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({canvas: document.getElementById('canvas')});
            renderer.setSize(window.innerWidth, window.innerHeight);

            // Create video element and texture
            video = document.createElement('video');
            video.src = 'https://www.youtube.com/watch?v=9Mj60dBQlIU'; // Replace with your video URL
            video.crossOrigin = 'anonymous';
            video.loop = true;
            videoTexture = new THREE.VideoTexture(video);
            videoMaterial = new THREE.MeshBasicMaterial({map: videoTexture});

            // Create video screen
            const geometry = new THREE.PlaneGeometry(16, 9);
            videoScreen = new THREE.Mesh(geometry, videoMaterial);
            scene.add(videoScreen);

            // Create buttons
            const buttonGeometry = new THREE.PlaneGeometry(1, 0.5);
            const button1Material = new THREE.MeshBasicMaterial({color: 0xff0000});
            const button2Material = new THREE.MeshBasicMaterial({color: 0x00ff00});

            button1 = new THREE.Mesh(buttonGeometry, button1Material);
            button1.position.set(-2, -2, 0);
            scene.add(button1);

            button2 = new THREE.Mesh(buttonGeometry, button2Material);
            button2.position.set(2, -2, 0);
            scene.add(button2);

            // Set up VR
            renderer.xr.enabled = true;
            document.body.appendChild(renderer.domElement);

            // VR Button
            document.getElementById('enter-vr').addEventListener('click', () => {
                renderer.xr.getSession() ? renderer.xr.end() : renderer.xr.getSession();
            });

            // Controllers
            controller1 = renderer.xr.getController(0);
            controller2 = renderer.xr.getController(1);
            scene.add(controller1);
            scene.add(controller2);

            controller1.addEventListener('selectstart', onSelectStart);
            controller2.addEventListener('selectstart', onSelectStart);

            animate();
        }

        function onSelectStart(event) {
            const controller = event.target;
            const intersects = getIntersections(controller);

            if (intersects.length > 0) {
                const intersection = intersects[0];
                if (intersection.object === button1) {
                    video.currentTime = 22; // Jump to 22 seconds
                } else if (intersection.object === button2) {
                    video.currentTime = 55; // Jump to 55 seconds
                }
            }
        }

        function getIntersections(controller) {
            const tempMatrix = new THREE.Matrix4();
            tempMatrix.identity().extractRotation(controller.matrixWorld);

            const raycaster = new THREE.Raycaster();
            raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld);
            raycaster.ray.direction.set(0, 0, -1).applyMatrix4(tempMatrix);

            return raycaster.intersectObjects([button1, button2]);
        }

        function animate() {
            renderer.setAnimationLoop(() => {
                if (video.readyState === video.HAVE_ENOUGH_DATA) {
                    videoTexture.needsUpdate = true;
                }
                renderer.render(scene, camera);
            });
        }
    </script>
</body>
</html>
